---
# Staging Environment Configuration

environment:
  name: staging
  short_name: staging
  description: "Pre-production environment for UAT and final testing"

# API Configuration
api:
  base_url: "https://api-staging.saasplatform.example.com"
  version: "v1"
  timeout_seconds: 30
  rate_limiting:
    enabled: true
    requests_per_minute: 1000

# Database Configuration
database:
  host: "staging-db.saasplatform.example.com"
  port: 5432
  name: "saas_staging"
  ssl_enabled: true
  connection_pool_size: 20
  query_timeout_seconds: 20

# Storage Configuration
storage:
  provider: "s3"
  bucket: "saas-staging-storage"
  region: "us-east-1"
  max_file_size_mb: 50
  allowed_file_types:
    - "image/*"
    - "application/pdf"
    - "text/csv"
    - "application/json"

# Authentication Configuration
auth:
  session_duration_hours: 72  # 3 days
  require_email_verification: true
  allow_social_login: true
  password_policy:
    min_length: 8
    require_uppercase: true
    require_numbers: true
    require_special_chars: false
  mfa_required: false

# Feature Flags
feature_flags_enabled: true
allow_feature_override: false

# Logging Configuration
logging:
  level: "info"
  log_sql_queries: false
  log_api_requests: true
  log_user_actions: true
  retention_days: 30

# Monitoring
monitoring:
  enabled: true
  error_tracking: true
  performance_monitoring: true
  uptime_checks_enabled: true
  uptime_check_interval_minutes: 5

# Email Configuration
email:
  provider: "sendgrid"
  from_address: "noreply@staging.saasplatform.example.com"
  from_name: "SaaS Platform [STAGING]"

# Cache Configuration
cache:
  enabled: true
  provider: "redis"
  host: "staging-redis.saasplatform.example.com"
  port: 6379
  ttl_seconds: 600

# Security Settings
security:
  cors_enabled: true
  cors_origins:
    - "https://staging.saasplatform.example.com"
    - "https://preview.saasplatform.example.com"
  csrf_protection: true
  rate_limiting_strict: true
  ip_whitelist_enabled: false

# Third-party Integrations
integrations:
  stripe:
    enabled: true
    test_mode: true
    webhook_secret: "whsec_staging_test_key"

  analytics:
    enabled: true
    provider: "mixpanel"
    api_key: "staging_analytics_key"

  sentry:
    enabled: true
    dsn: "https://staging@sentry.io/project"
    environment: "staging"
    sample_rate: 1.0

# Debugging
debug:
  enabled: false
  show_errors: false
  pretty_print_json: true
  sql_explain_enabled: false
  profiling_enabled: true

# Deployment
deployment:
  auto_deploy: true
  branch: "staging"
  build_on_push: true
  run_tests: true
  require_approval: false

# Resource Limits (Staging mimics production)
limits:
  max_requests_per_second: 100
  max_concurrent_users: 1000
  max_database_connections: 100
  max_storage_per_user_gb: 500

# Data Management
data:
  # Use sanitized production data snapshots
  data_source: "production_snapshot"
  refresh_schedule: "weekly"
  anonymize_pii: true

# Testing Configuration
testing:
  automated_tests_enabled: true
  load_testing_enabled: true
  security_scanning_enabled: true
  smoke_tests_on_deploy: true
